# The name of the workflow as it will appear in the "Actions" tab of the GitHub repository.
name: run-selenium-tests
# The name for workflow runs generated from the workflow, which will appear in the list of workflow runs on your repository's "Actions" tab.
run-name: ${{ github.actor }} is learning GitHub Actions
# Specifies the trigger for this workflow. 
on: [push]
# Groups together all the jobs that run in the workflow.
jobs:
  # Defines a job
  run-tests:
    runs-on: ubuntu-latest
    # Groups together all the steps that run in the job
    
    steps:
    #   This is an action that checks out your repository onto the runner, allowing you to run scripts or other actions against your code
      - uses: actions/checkout@v3
      # - name: Set up Python $3.11
      #   uses: actions/setup-python@v4
      #   with:
      #     python-version: 3.11
      - name: Set up Selenium Grid
        run: docker-compose up -d --scale chrome=5 --scale firefox=0
      - name : check status of grid
        run: |
          echo $(curl -s -o /dev/null -w ''%{http_code}'' http:localhost:4444/wd/hub/status)
      - name: Wait for Selenium Grid to be up
        run: |
          while [ "$(curl -s -o /dev/null -w ''%{http_code}'' http:localhost:4444/wd/hub/status)" != "200" ]; do sleep 1; done
      # - name: Install dependencies
      #   run: |
      #     python -m pip install --upgrade pip
      #     pip install ruff pytest
      #     if [ -f requirements.txt ]; then pip install -r requirements.txt; fi

      # - name: Test with pytest
      #   run: pytest
      # - name: Stop Docker
      #   run: docker-compose down